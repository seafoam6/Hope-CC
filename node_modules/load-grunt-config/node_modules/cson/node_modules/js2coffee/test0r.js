(function() {
  var acorn, code, esprima, main, narcissus, param, parseFunction, stringify;

  code = "foo = 'bar'";

  main = function(parse) {
    var ast;
    ast = parse(code);
    return console.log(stringify(ast));
  };

  stringify = function(obj) {
    return JSON.stringify(obj, null, 2);
  };

  if (require.main === module) {
    param = process.argv[2];
    parseFunction = null;
    switch (param) {
      case 'narcissus':
        console.log('narcissus');
        narcissus = require('narcissus_new');
        parseFunction = narcissus.parser.parse;
        break;
      case 'packed':
        console.log('narcissus_packed');
        narcissus = require('./src/documents/lib/narcissus_packed');
        parseFunction = narcissus.parser.parse;
        break;
      case 'acorn':
        console.log('acorn');
        acorn = require('acorn');
        parseFunction = acorn.parse;
        break;
      case 'esprima':
        console.log('esprima');
        esprima = require('esprima');
        parseFunction = esprima.parse;
        break;
      default:
        console.log('no parser specified');
        process.exit(1);
    }
    main(parseFunction);
  }

}).call(this);
